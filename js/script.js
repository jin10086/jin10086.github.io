(s=>{function t(){i=!0}function a(t){setTimeout(function(){i=!1,t&&t()},200)}var e=s("#search-form-wrap"),i=!1,n=(s("#nav-search-btn").on("click",function(){i||(t(),e.addClass("on"),a(function(){s(".search-form-input").focus()}))}),s(".search-form-input").on("blur",function(){t(),e.removeClass("on"),a()}),s("body").on("click",function(){s(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var t=s(this),a=t.attr("data-url"),e=encodeURIComponent(a),i="article-share-box-"+t.attr("data-id"),t=t.offset(),n=(window.location.href,s("title").html()),r=s(".article-entry img").length?s(".article-entry img").eq(0).attr("src"):"";if(""===r||/^(http:|https:)?\/\//.test(r)||(r=window.location.origin+r),s("#"+i).length){if((o=s("#"+i)).hasClass("on"))return void o.removeClass("on")}else{var i=['<div id="'+i+'" class="article-share-box">','<input class="article-share-input" value="'+a+'">','<div class="article-share-links">','<a href="http://v.t.sina.com.cn/share/share.php?url='+e+"&title="+n+"&pic="+r+'" class="article-share-weibo" target="_blank" title="微博"></a>','<a href="http://s.jiathis.com/qrcode.php?url='+e+"&title="+n+'" class="article-share-wechat" target="_blank" title="微信"></a>','<a href="http://connect.qq.com/widget/shareqq/index.html?url='+e+"&title="+n+"&source="+n+'" class="article-share-qq" target="_blank" title="QQ"></a>','<a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+e+"&title="+n+"&pics="+r+"&summary="+n+'" class="article-share-qqzone" target="_blank" title="QQ空间"></a>','<br/><a href="https://twitter.com/intent/tweet?url='+e+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+e+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+e+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+e+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join(""),o=s(i);s("body").append(o)}s(".article-share-box.on").hide(),o.css({top:t.top+25,left:t.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){s(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}),s(".article-entry").each(function(t){s(this).find("img").each(function(){var t;s(this).parent().hasClass("fancybox")||((t=this.alt)&&s(this).after('<span class="caption">'+t+"</span>"),s(this).wrap('<a href="'+this.src+'" title="'+t+'" class="fancybox"></a>'))}),s(this).find(".fancybox").each(function(){s(this).attr("rel","article"+t)})}),s.fancybox&&s(".fancybox").fancybox(),s("#container")),r=!1;s("#main-nav-toggle").on("click",function(){r||(r=!0,n.toggleClass("mobile-nav-on"),setTimeout(function(){r=!1},200))}),s("#wrap").on("click",function(){!r&&n.hasClass("mobile-nav-on")&&n.removeClass("mobile-nav-on")})})(jQuery);