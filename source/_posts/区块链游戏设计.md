---
title: 区块链游戏设计
categories:
  - 区块链
date: 2019-09-06 15:10:32
tags:
---


# 区块链游戏设计

## 大概规则

在Dice为基础上加上一些好的玩法...

### 玩家不会输钱

玩家使用EOS来玩游戏...

输了的EOS只是会延迟30天返回给他（这个EOS  可以拿去借贷 投票等等 获得无风险的EOS）

赢了的话 可以获得TOKEN

### 按照TOKEN 分红

每周分红一次.  按照总的TOKEN分红.


### TOKEN会过期

多久没有玩以后，TOKEN会自动失效.

比如每天token 减少5%之类的（某个人的总量）

但是他只要当天玩了5%以上的 交易量，就不消减.

当然也可以用EOS购买保险.(防止过期的.)，这个保险的价格如何设置再想想



### pooltogether 的玩法

[pooltogether 官网](https://www.pooltogether.us/pools/0xb7896fce748396EcFC240F5a0d3Cc92ca42D7d84?page=pool)

[以太坊上的无损彩票](https://www.theblockbeats.com/news/3237?from=timeline&isappinstalled=0)

本质上就是拿到ETH,然后拿去借贷，用利息来发彩票大奖

如果基于EOS做的话，可以直接把钱丢进[REX](https://eosrex.io/)里面去

主要逻辑是：

用户选择用EOS来玩，每0.1个EOS生成一张彩票

然后这个EOS全部丢进了REX里面,

7天一个周期，里面的利息自动到奖池里面

到期后开奖，把97%的钱 都分给大奖获得者.

所以需要做的是

#### 与REX合约的交互  
 在合约内如何自动把钱转进去、转出来，如何自动提取利息
 
 1. 无法代理，所以只能用户吧钱转到我们合约，合约再丢进REX合约.
 2. 用户提现的时候 需要检查是否大于4天.因为REX合约是判断4天才能让你提现的.
  - 
 
 能不能自动代理过去,钱不经过合约，但是利息给合约，这样对用户来说  最安全
 
#### 随机数的生成


#### 代理投票？这个也是利息的一种 

#### 合约一些细节.
升级后，Pool Together 允许玩家在任意时间内买票或是提现，取消了以往每轮奖池内特定的时间限制。此外，玩家在购得彩票后，只要没有退出，会自动进入后续奖池，修改了原版玩家需在每轮奖池结束后提现、重新购买彩票的不合理设定。


## 游戏流程

### 用户玩游戏
- 用户转EOS到我们合约
- 我们先调用deposit充进REX合约
- 调用buyRex买到rex，算出用户得到了多少rex
- 存入用户充进的EOS数量以及rex数量
- 算出用户的彩票数.
- 算出总的彩票数

### 开奖

- 调用sellrex卖出所有的rex
- 拿到赚到的EOS，存入奖池
- 再放进去存着
- 根据奖劵总数，算出得奖用户的号码.
- 给某个用户标记得奖.(需要自行领取.)
- 领取后奖池归零.

### 用户退出.

- 退出的金额.（需要判断大于4天.
- sellrex卖出他的rex，利息放奖池
- 减去他的奖劵
- 退还他的EOS

